@namespace NexaCRM.Pages.Components.Layout
@using Microsoft.AspNetCore.Components.Routing

<div class="flex-shrink-0 themed-primary-bg border-r border-[var(--border-color)] transition-all duration-300 ease-in-out @(IsOpen ? "w-56" : "w-0 overflow-hidden")">
    <div class="p-4 h-full">
        <h2 class="text-xl font-bold themed-text-primary mb-6 whitespace-nowrap">@ActiveSectionLabel</h2>
        <nav class="flex flex-col space-y-2" aria-label="Secondary navigation">
            @if (Navigation.TryGetValue(ActiveSection, out var secondaryNav))
            {
                foreach (var link in secondaryNav.Links)
                {
                    <NavLink class="secondary-nav-link" href="@link.Href" Match="@link.Match" ActiveClass="active">@link.Title</NavLink>
                }
            }
        </nav>
    </div>
</div>

@code {
    [Parameter]
    public bool IsOpen { get; set; }

    [Parameter]
    public PrimaryNavSection ActiveSection { get; set; }

    [Parameter]
    public string ActiveSectionLabel { get; set; } = string.Empty;

    [Parameter]
    public IReadOnlyDictionary<PrimaryNavSection, PrimaryNavConfig> Navigation { get; set; } = new Dictionary<PrimaryNavSection, PrimaryNavConfig>();
}
