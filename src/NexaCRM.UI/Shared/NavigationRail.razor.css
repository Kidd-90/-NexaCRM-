/* Navigation Rail - responsive icon rail + detail panel */
.nav-rail__panel {
    animation: navPanelReveal 480ms cubic-bezier(.2,.9,.2,1);
    box-shadow: 0 8px 32px rgba(76,29,149,0.08), 0 1.5px 0 rgba(76,29,149,0.04);
    background: #F9FAFB;
    border-radius: 1.2rem;
    will-change: transform, opacity;
}

@keyframes navPanelReveal {
    0% {
        opacity: 0;
        transform: translateX(32px) scale(0.98);
        box-shadow: none;
    }
    60% {
        opacity: 1;
        transform: translateX(0) scale(1.01);
        box-shadow: 0 8px 32px rgba(76,29,149,0.08);
    }
    100% {
        opacity: 1;
        transform: none;
        box-shadow: 0 8px 32px rgba(76,29,149,0.08), 0 1.5px 0 rgba(76,29,149,0.04);
    }
}
.nav-rail {
    display: grid;
    /* outline 180ms ease; */ /* Removed invalid property */
    /* icons column + panel (panel made slightly narrower for visual balance) */
             box-shadow: 0 1.5px 0 rgba(76,29,149,0.04);
    grid-template-columns: calc(var(--nav-rail-icons-width, 56px) + 2 * var(--nav-rail-icons-margin, 0.75rem)) minmax(180px, 1fr);
    gap: 0;
    /* Fix the rail to the left side of the viewport so it doesn't move on page scroll */
     position: fixed;
     /* offset the rail slightly to match the main surface top padding so
         the panel and surface align visually */
    top: calc(var(--spacing-md) / 2);
             outline: 2px solid #C7D2FE;
             outline-offset: 2px;
             background: linear-gradient(120deg, rgba(236,233,254,0.7), rgba(250,245,255,0.85));
    left: 0;
    bottom: 0;
    height: 100vh;
             transform: scale(0.98) translateX(2px);
             box-shadow: 0 2px 8px rgba(76,29,149,0.10);
             background: linear-gradient(120deg, rgba(236,233,254,0.95), rgba(250,245,255,0.98));
     /* Use the app's shared sidebar width variable so the fixed rail and the
         main content offset remain in sync. This prevents the fixed rail from
         contributing to horizontal overflow. */
    width: var(--sidebar-width, 320px);
             box-shadow: 0 0 0 2px #A5B4FC;
    --nav-rail-icons-width: 56px; /* logical width of the icons column - used for centering fixed logo */
    --nav-rail-icons-margin: 0.75rem; /* consistent breathing room around the icon rail */
     /* enforce box-sizing and prevent the rail from causing document overflow */
     box-sizing: border-box;
     overflow: hidden; /* Prevent internal content from expanding beyond the rail */
             box-shadow: 0 0.5px 0 rgba(76,29,149,0.04);
     min-width: 56px; /* ensure collapsed baseline */
     max-width: var(--sidebar-width, 320px);
}

/* Ensure the nav rail sits above common overlays (mobile overlay, global actions)
   and accepts pointer events so icon clicks are not blocked. Keep this modest
   to avoid covering toasts and modal backdrops which intentionally sit above. */
.nav-rail {
             box-shadow: 0 2px 8px rgba(76,29,149,0.10);
    /* Keep a high stacking context so the rail stays interactive above
       most app overlays. When fixed it should still accept pointer events. */
    z-index: 20000;
    pointer-events: auto;
}

/* When collapsed, constrain the rail to a narrow column so the app content
   is not obscured. The panel (second column) will be effectively hidden. */
.nav-rail.collapsed {
    grid-template-columns: calc(var(--nav-rail-icons-width, 56px) + 2 * var(--nav-rail-icons-margin, 0.75rem)) 0px !important;
    width: calc(var(--nav-rail-icons-width, 56px) + 2 * var(--nav-rail-icons-margin, 0.75rem)) !important;
}

.nav-rail__icons {
    display: grid;
     /* Make the top/main area visually larger while preventing it from
         overflowing the grid. Use a flexible minmax for the main row and
         min-content for the bottom so the bottom group keeps its natural
         height and remains visible. This keeps a ~4:1 visual ratio while
         avoiding overflow that hides the bottom icons. */
     grid-template-rows: minmax(0, 4fr) min-content;
     width: var(--nav-rail-icons-width, 56px);
     /* Fill the full height of the rail so the grid rows (4fr / 1fr)
         correctly position the bottom area. Use box-sizing so padding
         is included and avoid subtracting margins from the height. */
     height: 100%;
     margin: var(--nav-rail-icons-margin, 0.75rem);
     padding: 0;
     /* make room at the bottom so .nav-rail__bottom won't be clipped by
         the fixed company logo (or device safe-area). The 72px value roughly
         matches the logo/button height + margin; adjust if your logo is larger. */
      /* increase reserved bottom space slightly to account for larger logos
          or comfortable spacing so bottom icons remain visible */
      padding-bottom: calc(var(--nav-rail-icons-margin, 0.75rem) + 88px + env(safe-area-inset-bottom));
    background: transparent;
    gap: 0.75rem;
    min-width: var(--nav-rail-icons-width, 56px);
    box-sizing: border-box;
    position: relative;
    /* Allow the bottom group to be visible even if padding is applied */
    overflow: visible;
    pointer-events: auto;
    align-content: stretch;
    margin-left: 12px; /* 아이콘 영역을 더 중앙에 오도록 좌측 여백 추가 */
    margin-right: 0;
}

.nav-rail__main {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.6rem; /* slightly reduced spacing so the main area is a bit more compact */
    overflow-y: auto; /* allow icon stack to scroll independently */
    min-height: 0;
    padding: 0;
    /* allow the main area to grow/shrink inside the icons grid and keep
       the bottom area visible: reserve the same bottom spacing used by
       .nav-rail__icons so the main column can't push the bottom off-screen */
    flex: 1 1 auto;
    box-sizing: border-box;
    /* reduce the maximum height slightly so the bottom boundary remains visible */
    max-height: calc(100% - (var(--nav-rail-icons-margin, 0.75rem) + 88px + env(safe-area-inset-bottom) + 8px));
    /* make the main column slightly narrower so the edge/border reads clearly */
    width: calc(var(--nav-rail-icons-width, 56px) + 8px);
    padding-bottom: 6px; /* small padding so bottom border isn't flush against content */
    margin: 0 auto; /* center within the icons column */
    border-radius: 1rem;
    border-color: #fff;
    background: #F9FAFB;
    /* visible separation between main and bottom */
    border-bottom: 1px solid var(--divider-color, #E5E7EB);
    justify-content: flex-start;
}

.nav-rail__main-inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem; /* tightened spacing to match outer column */
    padding: 0.25rem 0;
        /* inner panel uses the logical icon width and has left/right padding (margin) to sit inset */
        width: var(--nav-rail-icons-width, 56px);
        margin: 0 6px; /* left/right inset spacing */
    border-radius: 1rem;
    border-color: #2E2E2E;
    background-color: #2E2E2E;
}

.rail-debug {
    position: absolute;
    top: 6px;
    left: 6px;
    display: flex;
    flex-direction: column;
    gap: 2px;
    padding: 6px 8px;
    background: rgba(255,255,255,0.9);
        width: var(--nav-rail-icons-width, 56px);
        min-width: var(--nav-rail-icons-width, 56px);
        max-width: var(--nav-rail-icons-width, 56px);
    box-shadow: 0 2px 6px rgba(2,6,23,0.06);
    pointer-events: none;
    z-index: 10002;
    font-size: 11px;
}

.rail-icon {
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    width: 44px;
    height: 44px;
    display: grid;
    place-items: center;
    border-radius: 12px;
    border: 1px solid transparent; /* transparent by default like notif-button */
    background: #2E2E2E; /* default dark background for icons */
    color: #F3F4F6; /* light icon color for contrast */
    font-size: 1.1rem;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast), background-color var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast);
    cursor: pointer;
    overflow: visible; /* avoid clipping subtle effects */
}

.rail-icon:hover {
    /* visually prominent gray hover for better contrast on dark rail */
    background: #4B5563; /* gray-600 */
    border-color: #6B7280; /* gray-500 border on hover */
    color: #FFFFFF; /* bright icon color on hover for contrast */
    transform: translateY(-1px);
    box-shadow: 0 6px 18px rgba(2,6,23,0.18);
}

.rail-icon:active {
    transform: translateY(0);
    box-shadow: 0 4px 10px rgba(2,6,23,0.12);
}

.rail-icon.active {
    border-color: #D1D5DB;
    color: #111827; /* active = near-black */
    background: #E5E7EB; /* subtle neutral highlight */
}

/* Make active icons visually larger without changing layout flow */
.rail-icon.active,
.rail-icon.active:hover {
    transform: translateY(-1px) scale(1.12);
    box-shadow: 0 10px 26px rgba(2,6,23,0.18);
}

/* Slight hover feedback on the icon glyph */
.rail-icon i,
.rail-icon svg {
    transition: transform var(--transition-fast), color var(--transition-fast);
    font-size: 1.25rem; /* slightly larger to fill the 44px button */
    line-height: 1;
    display: inline-block;
    color: inherit;
    width: 1em;
    height: 1em;
}

/* Make only the profile button fully round */
.rail-icon--profile {
    border-radius: 999px;
    position: relative; /* for positioning the status dot */
}

/* Green login indicator dot at bottom-right of the profile icon */
.rail-icon--profile .indicator-dot {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 999px;
    background: #10B981; /* emerald-500 */
    left: 25px;
    box-shadow: 0 0 0 2px #FFFFFF; /* white ring to separate from background */
    pointer-events: none;
}

.nav-rail__bottom {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    gap: 0.5rem; /* increase spacing between bottom icons */
    /* keep a top padding but ensure the bottom group sits above the fixed company logo */
    padding: 0.25rem 0 0.75rem;
     /* keep the bottom group visually pinned within the icons column so
         it remains visible even if the main area needs to scroll */
     position: sticky;
     /* nudge the sticky anchor lower so settings icon sits further down */
     bottom: calc(6px + env(safe-area-inset-bottom));
     z-index: 10008; /* sit above the fixed company logo (which is 10005) */
    /* ensure bottom group sits at the end of the icons grid and is clickable */
    align-self: end;
    /* add modest bottom offset so the icons sit comfortably above the fixed logo */
    /* increase bottom padding so clickable targets clear the fixed logo */
    padding-bottom: calc(36px + env(safe-area-inset-bottom));
    /* add a subtle top border so the main/bottom boundary is visually obvious */
    border-top: 1px solid var(--divider-color, #E5E7EB);
    border-radius: 1rem;
    border-color: #fff;
    background: #F9FAFB;
    min-height: 0;
    width: 100%;
}

/* Company logo button at the very bottom of the rail */
.rail-logo--company {
    display: grid;
    place-items: center;
    width: 52px;
    height: 52px;
    /* Keep the company logo fixed near the bottom of the rail but avoid
       extremely high z-index values or debug outlines in production. */
    position: fixed;
    left: calc(var(--nav-rail-icons-margin, 0.75rem) + var(--nav-rail-icons-width, 56px) / 2 - 22px);
    bottom: 16px;
    z-index: 10005;
    border-radius: 8px;
    overflow: hidden;
    background: #FFFFFF; /* small white background for contrast */
    box-shadow: 0 8px 20px rgba(2,6,23,0.08);
}
.rail-logo--company img {
    width: 28px;
    height: 28px;
    object-fit: contain;
}

.rail-logo {
    display: grid;
    place-items: center;
    width: 44px;
    height: 44px;
    border-radius: 12px;
    border: 1px solid #E5E7EB;
    background: #FFFFFF;
    overflow: hidden;
    order: 0; /* keep top logo at natural position */
    position: static; /* restore to document flow so bottom company logo is visible */
}

.rail-logo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.nav-rail__panel {
    min-width: 0;
    /* brand gradient vars used for the subtle purple glow */
    --brand-gradient-start: #7c3aed;
    --brand-gradient-end: #9333ea;

    padding: 0.5rem 0.5rem 0.75rem 0.5rem; /* reduced padding to match surface */
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    /* Harmonize with the main surface: use the same surface color and subtle
       border so the rail panel feels like part of the same UI plane. Remove
       harsh contrasts and ensure scroll behavior remains internal. */
    background: var(--surface-color, #FFFFFF);
    border: 1px solid var(--divider-color, #E5E7EB);
    border-radius: 1rem;
    overflow: hidden; /* keep wheel gestures flowing to the page instead of scrolling the panel */
    max-height: calc(100vh - 2 * var(--spacing-md)); /* leave top/bottom breathing room */
    box-sizing: border-box;
    /* slightly narrower max width to give visual space between rail and content */
    max-width: calc(var(--sidebar-width, 320px) - 72px);
    /* 3D layered shadow: ambient, main drop, colored rim (purple) */
    box-shadow:
        0 6px 12px rgba(15, 23, 42, 0.04),   /* ambient */
        0 20px 40px rgba(15, 23, 42, 0.08),  /* main drop */
        4px 6px 28px rgba(124, 58, 237, 0.06); /* subtle purple rim */
    opacity: 1;
    transform: translateX(0);
    transition:
        box-shadow 240ms cubic-bezier(.2,.9,.2,1),
        transform 240ms cubic-bezier(.2,.9,.2,1),
        opacity 200ms ease;
    position: relative; /* for pseudo-elements (highlight + glow) */
    will-change: transform, box-shadow, opacity;
}

/* gradient glow using a pseudo-element so we can control the spread and color smoothly */
.nav-rail__panel::after {
    content: "";
    pointer-events: none;
    position: absolute;
    /* larger, softer glow ellipse to emphasize lower-right rim */
    right: -18px;
    bottom: -18px;
    width: 68px;
    height: 48px;
    border-radius: 50%;
    background: radial-gradient(ellipse at center, rgba(124,58,237,0.16) 0%, rgba(147,51,234,0.08) 40%, transparent 70%);
    filter: blur(18px);
    opacity: 0.95;
    transform: translateZ(0) scale(1);
    transition: opacity 240ms ease, transform 240ms ease, filter 240ms ease;
}

/* soft top-left highlight to simulate a light source */
.nav-rail__panel::before {
    content: "";
    pointer-events: none;
    position: absolute;
    left: 8px;
    top: 8px;
    right: 8px;
    height: 10px;
    border-radius: 8px;
    background: linear-gradient(180deg, rgba(255,255,255,0.16), rgba(255,255,255,0.02));
    filter: blur(6px);
    opacity: 0.9;
    transition: opacity 220ms ease, transform 220ms ease;
}

/* Hover: lift the panel slightly and intensify shadows/glow for a floating 3D feel */
.nav-rail__panel:hover {
    transform: translateY(-6px);
    box-shadow:
        0 14px 28px rgba(15,23,42,0.06),
        0 34px 64px rgba(15,23,42,0.12),
        8px 12px 44px rgba(124,58,237,0.10);
}
.nav-rail__panel:hover::after {
    transform: translateY(-6px) scale(1.06);
    filter: blur(20px);
    opacity: 1;
}
.nav-rail__panel:hover::before {
    transform: translateY(-2px);
    opacity: 1;
}

/* When panel is collapsed, hide shadow/glow to avoid orphaned visuals */
.nav-rail__panel.collapsed {
    transform: translateX(-16px) scale(0.98);
    box-shadow: none !important;
}
.nav-rail__panel.collapsed::after {
    opacity: 0 !important;
    transform: translateY(6px) scale(0.9) !important;
}

.nav-rail__panel:not(.collapsed) {
    animation: railPanelReveal 320ms cubic-bezier(.2,.9,.2,1) 40ms both;
}

@keyframes railPanelReveal {
    0% {
        opacity: 0;
        transform: translateX(-18px) scale(0.96);
    }
    60% {
        opacity: 1;
        transform: translateX(3px) scale(1.01);
    }
    100% {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
}

/* reduce intensity on smaller screens to improve performance and avoid visual noise */
@media (max-width: 767px) {
    .nav-rail__panel {
        box-shadow: 0 10px 18px rgba(15,23,42,0.04);
    }
    .nav-rail__panel::after {
        opacity: 0.6;
        filter: blur(8px);
        right: -8px;
        bottom: -8px;
        width: 28px;
        height: 28px;
    }
}

.nav-rail__panel.collapsed {
    width: 0 !important;
    min-width: 0 !important;
    padding: 0 !important;
    opacity: 0;
    transform: translateX(-16px) scale(0.96);
    pointer-events: none;
}

/* Keep internal scrolling behavior (so the rail doesn't force body/document scrolling)
   but hide the native scrollbars so the rail visually has no scroll UI. This
   preserves wheel/touch scrolling while preventing visible scrollbars. */
.nav-rail__main,
.nav-rail__panel {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
}
.nav-rail__main::-webkit-scrollbar,
.nav-rail__panel::-webkit-scrollbar {
    width: 0;
    height: 0;
}

.panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    padding: 0.5rem 0.35rem 0.75rem 0.35rem;
    border-bottom: 1px solid #E5E7EB;
}

/* When in DB panel, place the import button beneath the title */
.panel-header--db {
    flex-wrap: wrap;
    align-items: flex-start;
}

.panel-header--db .panel-title {
    flex: 1 0 100%;
}

.panel-header--db .import-button {
    margin-top: 0.35rem;
}

.panel-title {
    font-weight: 700;
    color: #111827; /* solid title */
}

/* Top user summary inside the panel */
.panel-user {
    display: flex;
    align-items: center;
    gap: 0.65rem;
    padding: 0.6rem 0.6rem 0.4rem 0.6rem;
    border-bottom: 1px solid var(--divider-color, #E5E7EB);
}
.panel-user__avatar {
    width: 40px;
    height: 40px;
    border-radius: 999px;
    display: grid;
    place-items: center;
    background: linear-gradient(180deg, #F3F4F6, #E5E7EB);
    color: #374151;
    font-weight: 700;
}
.panel-user__info {
    display: flex;
    flex-direction: column;
}
.panel-user__name {
    font-weight: 700;
    color: #111827;
    font-size: 0.95rem;
}
.panel-user__email {
    font-size: 0.8rem;
    color: #6B7280;
}

/* Bottom area inside the panel for per-page content */
.panel-footer {
    margin-top: 0.6rem;
    padding: 0.6rem;
    border-top: 1px solid var(--divider-color, #E5E7EB);
    background: transparent;
}

.panel-action {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.35rem 0.6rem;
    border-radius: 10px;
    border: 1px solid #E5E7EB;
    background: #F9FAFB;
    color: #6B7280;
    font-weight: 600;
}

.panel-action:hover {
    color: #111827;
    background: #FFFFFF;
}

/* Import button variant for DB panel */
.panel-action.import-button {
    background: #ECFDF5; /* emerald-50 */
    border-color: #A7F3D0; /* emerald-200 */
    color: #065F46; /* emerald-800 */
}

.panel-action.import-button:hover {
    background: #D1FAE5; /* emerald-100 */
    border-color: #6EE7B7; /* emerald-300 */
    color: #064E3B; /* emerald-900 */
}

.panel-action.import-button i {
    font-size: 1rem;
}

/* Divider above the first item in DB panel */
.panel-divider {
    border-top: 1px solid #E5E7EB;
    margin: 0.25rem 0 0.4rem 0;
}

.panel-section-label {
    padding: 0.6rem 0.35rem 0.25rem 0.35rem;
    color: #9CA3AF; /* muted label */
    font-size: 0.8rem;
    letter-spacing: 0.02em;
    text-transform: uppercase;
}

.panel-list {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
    padding: 0.25rem 0.25rem 0.5rem 0.25rem;
}

/* Badge shown along the rail with vertical text and a subtle engraved top border */
.nav-rail__badge {
    display: flex;
    align-items: center; /* center vertically */
    justify-content: center; /* center horizontally */
    width: 100%;
    padding: 4px 0; /* reduce top padding so badge centers with inner text */
    box-sizing: border-box;
    position: relative; /* for positioned divider between panel and text */
}

.nav-rail__badge-line {
    display: block;
    width: 100%;
    height: 0; /* visual divider handled by top-border on text */
}

.nav-rail__badge-text {
    display: inline-block;
    writing-mode: vertical-rl; /* render text vertically top-to-bottom */
    text-orientation: mixed;
    transform: rotate(180deg); /* flip so reading direction is top-to-bottom left-to-right */
    font-size: 0.75rem;
    letter-spacing: 0.08em;
    color: #9CA3AF; /* muted gray for badge text */
    /* reduce bottom padding so the visual divider sits between the panel and the middle of the text */
    padding: 6px 6px 2px 6px;
    /* switch to bottom border per request; thicker for stronger separation */
    border-bottom: 2px solid rgba(156,163,175,0.20);
    align-self: center;
    margin: 0 auto;
}

/* Footer variant: slightly smaller, lighter text */
.nav-rail__badge--footer .nav-rail__badge-text {
    font-size: 0.7rem;
    color: #9CA3AF;
    padding: 4px 6px;
    border-bottom-color: rgba(156,163,175,0.12);
}

/* Precise divider placed between the bottom of the inner panel and the badge text's middle.
   This gives finer control over vertical placement without relying solely on the text border. */
.nav-rail__badge::after {
    content: "";
    position: absolute;
    /* center the divider within the badge area so it aligns with the inner panel */
    left: 50%;
    transform: translateX(-50%);
    /* match the inner panel width exactly so the divider lines up with .nav-rail__main-inner */
    width: var(--nav-rail-icons-width, 56px);
    height: 2px; /* thicker divider per request */
    background: rgba(156,163,175,0.20);
    /* nudge the line slightly lower than center so it visually sits between
       the bottom edge of the inner panel and roughly the middle of the vertical text */
    top: calc(50% + 8px);
    pointer-events: none;
}

.nav-rail__panel .rail-panel-item {
    /* increase specificity to override any global .nav-link rules */
    position: relative;
    display: flex; /* ensure icon and label align horizontally */
    flex-direction: row;
    align-items: center;
    gap: 0.6rem; /* slightly tighter for smaller icon */
    padding: 0.45rem 0.6rem; /* reduce padding so small icon + label fit on one line */
    border-radius: 12px;
    min-height: 36px;
    color: #1F2937;
    font-weight: 600;
    text-decoration: none;
    background: transparent;
    box-shadow: inset 0 0 0 0 rgba(148,163,184,0.18);
    transition: transform 200ms cubic-bezier(.2,.9,.2,1),
                color 180ms ease,
                box-shadow 220ms ease,
                background-color 180ms ease;
    isolation: isolate;
}

.rail-panel-item::before {
    content: "";
    position: absolute;
    inset: 4px;
    border-radius: 12px;
    background: linear-gradient(130deg, rgba(124,58,237,0.12), rgba(59,130,246,0.08));
    opacity: 0;
    transform: scale(0.92);
    transition: opacity 220ms ease, transform 220ms cubic-bezier(.2,.9,.2,1);
    z-index: -1;
}

.rail-panel-item::after {
    content: "";
     border: 1.5px solid #E5E7EB;
     box-shadow: 0 2px 8px rgba(76,29,149,0.10), 0 1.5px 0 rgba(76,29,149,0.04), 0 0.5px 0 #fff inset;
    background: #F9FAFB;
     position: relative;
    position: absolute;
    left: 10px;
    top: 14px;
    bottom: 14px;
     box-shadow: 0 4px 16px 0 rgba(76,29,149,0.10), 0 0.5px 0 #fff inset;
     border: 1.5px solid #C7D2FE;
    width: 3px;
    border-radius: 999px;
    background: linear-gradient(180deg, rgba(124,58,237,0.0), rgba(124,58,237,0.4), rgba(124,58,237,0.0));
    opacity: 0;
     background: linear-gradient(135deg, #E0E7FF 60%, #fff 100%);
     box-shadow: 0 2px 8px rgba(76,29,149,0.12), 0 0.5px 0 #fff inset, 0 0.5px 0 #A5B4FC;
     border: 1.5px solid #C7D2FE;
    transform: scaleY(0.4);
    transition: opacity 200ms ease, transform 220ms cubic-bezier(.2,.9,.2,1);
}

.rail-panel-item:not(.active):hover,
.rail-panel-item:not(.active):focus-visible {
     background: linear-gradient(135deg, #C7D2FE 60%, #fff 100%);
     box-shadow: 0 4px 16px rgba(76,29,149,0.18), 0 0.5px 0 #fff inset, 0 0.5px 0 #A5B4FC;
     border: 1.5px solid #7C3AED;
    color: #4C1D95;
    transform: translateX(4px);
    box-shadow: inset 0 0 0 1px rgba(76,29,149,0.08), 0 8px 18px rgba(76,29,149,0.08);
     text-shadow: 0 2px 8px #A5B4FC, 0 0.5px 0 #fff;
     filter: drop-shadow(0 1px 2px #7C3AED) drop-shadow(0 0.5px 0 #fff);
}
.rail-panel-item:not(.active):hover::before,
.rail-panel-item:not(.active):focus-visible::before {
    opacity: 1;
    transform: scale(1);
}

.rail-panel-item:not(.active):hover::after,
.rail-panel-item:not(.active):focus-visible::after {
    opacity: 1;
    transform: scaleY(1);
}

.rail-panel-item:focus-visible {
    outline: none;
}

.rail-panel-item.active,
.rail-panel-item.active:hover {
    color: var(--neutral-gray-800);
    background: linear-gradient(140deg,
        var(--neutral-gray-050) 0%,
        color-mix(in srgb, var(--neutral-white) 65%, var(--neutral-gray-200) 35%) 100%);
    border: 1px solid var(--frosted-border);
    box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.55),
        0 10px 24px var(--shadow-light),
        0 0 0 1px color-mix(in srgb, var(--neutral-white) 72%, transparent);
    text-shadow: none;
    transform: none;
    filter: none;
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
}

.rail-panel-item.active::before {
    opacity: 1;
    transform: scale(1);
    background: linear-gradient(160deg,
        rgba(255, 255, 255, 0.75) 0%,
        color-mix(in srgb, var(--neutral-white) 40%, var(--neutral-gray-200) 60%) 100%);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

.rail-panel-item.active::after {
    opacity: 0;
    transform: scaleY(0.4);
    box-shadow: none;
    border: none;
    background: transparent;
}

.rail-panel-item__icon {
    /* smaller, transparent icon container to match compact row layout */
    width: 28px;
    height: 28px;
    display: grid;
    place-items: center;
    border-radius: 8px;
    background: transparent; /* user requested transparent background */
    color: inherit;
    transition: transform 160ms cubic-bezier(.2,.9,.2,1), background-color 160ms ease;
    flex: 0 0 auto; /* keep icon at fixed size inside flex row */
    border: none;
}

.nav-rail__panel .rail-panel-item:not(.active):hover .rail-panel-item__icon,
.nav-rail__panel .rail-panel-item:not(.active):focus-visible .rail-panel-item__icon {
    /* keep hover feedback subdued when container background is transparent */
    background: rgba(250,245,255,0.6);
    transform: translateX(1px);
}

.nav-rail__panel .rail-panel-item.active .rail-panel-item__icon {
    background: color-mix(in srgb, var(--neutral-white) 82%, var(--neutral-gray-100) 18%);
    border: 1px solid color-mix(in srgb, var(--neutral-gray-100) 60%, transparent);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6), 0 6px 12px rgba(0, 0, 0, 0.12);
    transform: none;
    color: var(--neutral-gray-800);
}


.rail-panel-item__icon i,
.rail-panel-item__icon svg {
    font-size: 0.98rem; /* slightly smaller to match reduced container */
    background: linear-gradient(135deg, #E0E7FF 60%, #fff 100%);
    box-shadow:
        0 2px 8px rgba(76,29,149,0.16), /* 깊은 그림자 */
        0 0.5px 0 #fff inset, /* 내부 하이라이트 */
        0 1.5px 0 #A5B4FC, /* 외곽선 하이라이트 */
        0 0 0 2px #C7D2FE inset; /* 입체감 강조 */
    border: 2px solid #C7D2FE;
    position: relative;
    line-height: 1;
    transition: transform 160ms cubic-bezier(.2,.9,.2,1);
}

.rail-panel-item.active .rail-panel-item__icon i,
.rail-panel-item.active .rail-panel-item__icon svg {
    background: none;
    border: none;
    box-shadow: none;
    color: var(--neutral-gray-800);
    transform: none;
}

.rail-panel-item:not(.active):hover .rail-panel-item__icon i,
.rail-panel-item:not(.active):focus-visible .rail-panel-item__icon i,
.rail-panel-item:not(.active):hover .rail-panel-item__icon i,
.rail-panel-item:not(.active):focus-visible .rail-panel-item__icon i {
    background: linear-gradient(135deg, #C7D2FE 60%, #fff 100%);
    box-shadow:
        0 4px 16px rgba(76,29,149,0.22),
        0 1px 0 #fff inset,
        0 2px 0 #C7D2FE,
        0 0 0 3px #A5B4FC inset;
    border: 2px solid #C7D2FE;
}
.rail-panel-item__label {
    text-shadow:
        0 2px 8px #A5B4FC,
        0 0.5px 0 #fff,
        0 1px 2px #C7D2FE;
    filter: drop-shadow(0 1px 2px #C7D2FE);
    display: block;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: 0.95rem;
    flex: 1 1 auto; /* allow label to take remaining space and shrink when needed */
}

.nav-rail__panel .rail-panel-item.active .rail-panel-item__label {
    color: var(--neutral-gray-800);
    text-shadow: none;
    filter: none;
}

@media (prefers-reduced-motion: reduce) {
    .nav-rail__panel {
        animation: none !important;
        transform: none !important;
    }

    .rail-panel-item,
    .rail-panel-item::before,
    .rail-panel-item::after,
    .rail-panel-item__icon,
    .rail-panel-item__icon i {
        transition-duration: 0.01ms !important;
        transition-delay: 0s !important;
        transform: none !important;
    }
}

/* Breakpoints: keep rail+panel for mobile and tablet */
@media (max-width: 767px) {
    .nav-rail {
        grid-template-columns: 56px minmax(220px, calc(var(--sidebar-width, 320px) - 56px));
        /* On small screens allow the rail to expand (no max-width) */
        max-width: none;
    }
}

@media (min-width: 768px) and (max-width: 1024px) {
    .nav-rail {
        grid-template-columns: 64px minmax(260px, 1fr);
    }
    .rail-icon { width: 44px; height: 44px; }
}
